---
Title: VDM++ã«ãŠã‘ã‚‹åˆæˆå‹(Compound Types) | é›†åˆ(Set)ã¨é…åˆ—(Sequence)
Category:
- VDM
- ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
Date: 2020-02-12T01:15:13+09:00
URL: https://korosuke613.hatenablog.com/entry/2020/02/12/vdmpp-compound-set-seq
EditURL: https://blog.hatena.ne.jp/korosuke613/korosuke613.hatenablog.com/atom/entry/26006613509260638
---

<!-- ã“ã“ã«å°å…¥ã‚’æ›¸ã -->

VDM++ã¯å½¢å¼ä»•æ§˜è¨˜è¿°è¨€èªã¨å‘¼ã°ã‚Œã‚‹è¨€èªã§ã€ä»•æ§˜ã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã®è¨€èªã§ã™ã€‚

æœ¬è¨˜äº‹ã¯VDM++ã®å‹ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã£ã¦ã§ãã‚‹å‹ã€åˆæˆå‹(Compound Types)ã®ä¸­ã§ã‚‚ã€**é›†åˆ(Set)**ã¨**é…åˆ—(Sequence)**ã®ç°¡å˜ãªã¾ã¨ã‚ã§ã™ã€‚

<!-- ç¶šãã‚’èª­ã‚€ã®ã‚„ã¤ -->
<!-- more -->

[Overture Toolã®ã‚µã‚¤ãƒˆ](http://overturetool.org/documentation/manuals.html)ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã€[VDM-10 Language Manual](http://raw.github.com/overturetool/documentation/master/documentation/VDM10LangMan/VDM10_lang_man.pdf)ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚

---

**ç›®æ¬¡**

[:contents]

<!-- ã“ã“ã«åºƒå‘ŠãŒå…¥ã‚‹ -->
---

# 2ç¨®é¡ã®å‹

VDM++ã«ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã„ã†**å‹**ãŒå­˜åœ¨ã—ã¦ãŠã‚Šã€å¤§ããåˆ†ã‘ã¦åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å‹ã¨åˆæˆå‹ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ãŒç°¡å˜ãªèª¬æ˜ã§ã™ã€‚

- **[åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å‹(Basic Data Types)](https://korosuke613.hatenablog.com/entry/2020/02/09/vdmpp-basic-data-types)** : åŸºæœ¬çš„ã§å˜ç´”ãªå‹
- **åˆæˆå‹(Compound Types)** : å‹(åŸºæœ¬å‹ã‹åˆæˆå‹)ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã£ã¦ã§ãã‚‹å‹ã€‚

# åˆæˆå‹(Compound Types)
å‹(åŸºæœ¬å‹ã‹åˆæˆå‹)ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã£ã¦ã§ãã‚‹å‹ã§ã™ã€‚ä»¥ä¸‹ã®8ç¨®é¡ã®å‹ãŒã‚ã‚Šã¾ã™ã€‚

- **é›†åˆ(Set Types)**  ğŸ‘ˆæœ¬è¨˜äº‹
- **é…åˆ—(Sequence Types)** ğŸ‘ˆæœ¬è¨˜äº‹
- é€£æƒ³é…åˆ—(Map Types)
- ã‚¿ãƒ—ãƒ«(Product Types)
- æ§‹é€ ä½“(Composite Types)
- union(Union Types)
- optional(Optional Types)
- å‚ç…§(The Object Reference Type)
- ãƒ©ãƒ ãƒ€å¼(Function Types)

ä»Šå›ã¯ã€é›†åˆã¨é…åˆ—ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## é›†åˆ(Set Type)
åŒã˜å‹ã®é †åºç„¡ã—é›†åˆã‚’æ‰±ã†å‹ã§ã™ã€‚

é›†åˆã®è¦ç´ ã¯ä»»æ„ã®å‹ã§æ§‹æˆã§ãã‚‹ã®ã§ã€ä¾‹ãˆã°ã€é›†åˆè‡ªä½“ã‚’é›†åˆã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

|å‹å|ã‚·ãƒ³ãƒœãƒ«  |æ„å‘³  |æ–‡æ³•  |
|---|---|---|---|
|set0| `set`  |ç©ºã®è¦ç´ ã‚’è¨±å®¹ã™ã‚‹é †åºç„¡ã—é›†åˆ | `set of TYPE` |
|set1| `set1`  |ç©ºã®è¦ç´ ã‚’è¨±å®¹ã—ãªã„é †åºç„¡ã—é›†åˆ | `set1 of TYPE` |

â€»`TYPE`ã¯ä»»æ„ã®å‹ã§ã™ã€‚

**åˆ©ç”¨ã§ãã‚‹æ¼”ç®—å­**

åˆ©ç”¨ã§ãã‚‹æ¼”ç®—å­ã‚’ä»¥ä¸‹ã®è¡¨ã«ç¤ºã—ã¾ã™ã€‚

ä»¥ä¸‹ã‚’å®šç¾©ã—ã¾ã™ã€‚

- `A`: ä»»æ„ã®å‹
- `S`: å‹ã¨ã—ã¦ã®é›†åˆ
- `s`, `s1`, `s2`: ä»»æ„ã®é›†åˆ
- `ss`: ä»»æ„ã®é›†åˆã®é›†åˆ
- `e`, `e1`, `e2`, `en`: ä»»æ„ã®é›†åˆã®è¦ç´ 
- `bd1`, `bd2`, `bdm`: ä»»æ„ã®æŸç¸›å¤‰æ•°(bound variable)
- `P`: ä»»æ„ã®è¿°èª(predicate)

|æ¼”ç®—å­|åå‰|å‹|
|---|---|---|
| `e in set s1`  | `e`ãŒ`s1`ã®ãƒ¡ãƒ³ãƒã§ã‚ã‚‹(Membership)                                                      | `A` * `set of A` â†’ `bool`            |
| `e not in set s1` | `e`ãŒ`s1`ã®ãƒ¡ãƒ³ãƒã§ãªã„(Not membership)                                                  | `A` * `set of A` â†’ `bool`            |
| `s1 union s2`     | `s1`ã¨`s2`ã®å’Œé›†åˆã‚’ç”Ÿæˆã™ã‚‹(Union)                                                      | `set of A` * `set of A` â†’ `set of A` |
| `s1 inter s2`     | `s1`ã¨`s2`ã®ç©é›†åˆã‚’ç”Ÿæˆã™ã‚‹(Intersection)                                               | `set of A` * `set of A` â†’ `set of A` |
| `s1 \ s2`         | `s2`ã«ãªã„`s1`ã®è¦ç´ ã®é›†åˆã‚’ç”Ÿæˆã™ã‚‹(Difference)                                         | `set of A` * `set of A` â†’ `set of A` |
| `s1 subset s2`    | `s1`ã®ã™ã¹ã¦ã®è¦ç´ ãŒ`s2`ã«ã‚‚å­˜åœ¨ã™ã‚‹(éƒ¨åˆ†é›†åˆ)(Subset)                                   | `set of A` * `set of A` â†’ `bool`     |
| `s1 psubset s2`   | `s1`ã®ã™ã¹ã¦ã®è¦ç´ ãŒ`s2`ã«ã‚‚å­˜åœ¨ã—ã€ã‹ã¤ã€`s2 / s1`ãŒç©ºã§ãªã„(çœŸéƒ¨åˆ†é›†åˆ)(Proper subset) | `set of A` * `set of A` â†’ `bool`     |
| `s1 = s2`         | `s1`ã¨`s2`ãŒç­‰ã—ã„(Equality)                                                             | `set of A` * `set of A` â†’ `bool`     |
| `s1 <> s2`        | `s1`ã¨`s2`ãŒç­‰ã—ããªã„(Inequality)                                                       | `set of A` * `set of A` â†’ `bool`     |
| `card s1`         | `s1`ã®è¦ç´ æ•°ã‚’è¿”ã™(Cardinality)                                                          | `set of A` â†’ `nat`                   |
| `dunion ss`       | `ss`ã®ã™ã¹ã¦ã®è¦ç´ (set)ã‚’çµåˆã™ã‚‹(Distributed union)                                     | `set of set of A` â†’ `set of A`       |
| `dinter ss`       | `ss`ã®ã™ã¹ã¦ã®è¦ç´ (set)ã‚’çµåˆã™ã‚‹(Distributed intersection)                              | `set1 of set of A` â†’ `set of A`      |
| `power s1`        | `s1`ã®ã¹ãé›†åˆã‚’ç”Ÿæˆã™ã‚‹(Finite power set)                                               | `set of A` â†’ `set of set of A`       |

ã¡ãªã¿ã«ã€ã“ã“ã§è¨€ã†`in set`ã¯`bool`ã‚’è¿”ã—ã¾ã™ãŒã€å†…åŒ…è¡¨è¨˜ã«ãŠã‘ã‚‹`e in set s1`ã¯ã€Œ`s1`ã‹ã‚‰å€¤ã‚’å–ã‚Šå‡ºã—`e`ã¨å®šç¾©ã™ã‚‹ã€ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚ãªã‚“ã§ãã‚“ãªã“ã¨ã«ãªã£ã¦ã„ã‚‹ã‹ã¯è¬ã§ã™...

## é…åˆ—(Sequence Type)

åŒã˜å‹ã®é…åˆ—ã‚’æ‰±ã†å‹ã§ã™ã€‚

é…åˆ—ã®è¦ç´ ã¯ä»»æ„ã®å‹ã§æ§‹æˆã§ãã‚‹ã®ã§ã€ä¾‹ãˆã°ã€é…åˆ—ã‚’æŒã¤é…åˆ—ã‚’æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚

|å‹å|ã‚·ãƒ³ãƒœãƒ«  |æ„å‘³  |æ–‡æ³•  |
|---|---|---|---|
|seq0| `seq`  |ç©ºã®è¦ç´ ã‚’è¨±å®¹ã™ã‚‹é…åˆ— | `seq of TYPE` |
|seq1| `seq1`  |ç©ºã®è¦ç´ ã‚’è¨±å®¹ã—ãªã„é…åˆ— | `seq1 of TYPE` |

â€»`TYPE`ã¯ä»»æ„ã®å‹ã§ã™ã€‚

**åˆ©ç”¨ã§ãã‚‹æ¼”ç®—å­**

åˆ©ç”¨ã§ãã‚‹æ¼”ç®—å­ã‚’ä»¥ä¸‹ã®è¡¨ã«ç¤ºã—ã¾ã™ã€‚
ä»¥ä¸‹ã‚’å®šç¾©ã—ã¾ã™ã€‚

- `A`: ä»»æ„ã®å‹
- `L`: å‹ã¨ã—ã¦ã®é…åˆ—
- `l`, `l1`, `l2`: ä»»æ„ã®é…åˆ—
- `ll`: ä»»æ„ã®é…åˆ—ã‚’æŒã¤é…åˆ—

|æ¼”ç®—å­|åå‰|å‹|
|---|---|---|
| `hd l`      | `l`ã®å…ˆé ­ã‚’å–ã‚Šå‡ºã™(Head)                                      | `seq1 of A` â†’ `A`                       |
| `tl l`      | `l`ã®å…ˆé ­ã‚’å–ã‚Šé™¤ã„ãŸ`seq`ã‚’å–ã‚Šå‡ºã™(Tail)                     | `seq1 of A` â†’ `seq of A`                |
| `len l`     | `l`ã®è¦ç´ æ•°ã‚’è¿”ã™(Length)                                      | `seq of A` â†’ `nat`                      |
| `elems l`   | `l`ã‚’`l`ã®`set`ã«å¤‰æ›ã™ã‚‹(Elements)                            | `seq of A` â†’ `set of A`                 |
| `inds l`    | `l`ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®`set`ã‚’ç”Ÿæˆã™ã‚‹(Indexes)                    | `seq of A` â†’ `set of nat1`              |
| `reverse l` | `l`ã®é †åºã‚’åè»¢ã—ãŸ`seq`ã‚’ç”Ÿæˆã™ã‚‹(Reverse)                    | `seq of A` â†’ `seq of A`                 |
| `l1 ^ l2`   | `l1`ã«`l2`ã‚’çµåˆã™ã‚‹(Concatenation)                            | `(seq of A) * (seq of A)` â†’ `seq of A`  |
| `conc ll`   | `ll`ã®ã™ã¹ã¦ã®è¦ç´ (`seq`)ã‚’çµåˆã™ã‚‹(Distributed concatenation) | `seq of seq of A` â†’ `seq of A`          |
| `l ++ m`    | `m`ã®ç¯„å›²ã®`l`ã‚’è¿”ã™(Sequence modiï¬cation)                     | `seq of A * map nat1 to A` â†’ `seq of A` |
| `l(i)`      | `l`ã®`i`ç•ªç›®ã®è¦ç´ ã‚’è¿”ã™(Sequence application)                                | `seq of A * nat1` â†’ `A`                 |
| `l1 = l2`   | `l1`ã¨`l2`ãŒç­‰ã—ã„(Equality)                                   | `(seq of A) * (seq of A)` â†’ `bool`      |
| `l1 <> l2`  | `l1`ã¨`l2`ãŒç­‰ã—ããªã„(Inequality)                             | `(seq of A) * (seq of A)` â†’ `bool`      |


# ä»£å…¥ã§ãã‚‹å€¤
é›†åˆã¨é…åˆ—ã«ã¯ä»¥ä¸‹ã®å€¤ã‚’ä»£å…¥ã§ãã¾ã™ã€‚

- **å¤–å»¶çš„è¨˜æ³•**(Set enumeration)
- **å†…åŒ…çš„è¨˜æ³•**(Set comprehension)

é›†åˆã¯`{}`ã§ã€é…åˆ—ã¯`[]`ã§è¦ç´ ã‚’å›²ã¿ã¾ã™ã€‚

## å¤–å»¶çš„è¨˜æ³•(Set enumeration)
`{e1, e2, ..., en}`

è¦ç´ ã‚’å…·ä½“çš„ã«è¨˜è¿°ã™ã‚‹æ–¹æ³•ã§ã™ã€‚

ä¾‹
```
set_1 = { <France>, <Denmark>, <SouthAfrica>, <SaudiArabia> }
seq_1 = [2, 4, 6, 8, 11]
seq_2 = []
```

## å†…åŒ…çš„è¨˜æ³•(Set comprehension)
`{e | bd1, bd2, ..., bdm & P}`

è¦ã¯ã€Pythonã®å†…åŒ…è¡¨è¨˜ã§ã™ã€‚

ä¾‹
```
set_2 = {x * x | x in set {1, 2, 3, 4} & x mod 2 = 0}
```

`{1, 2, 3, 4}`ã‹ã‚‰å€¤ã‚’é †ã«å–ã‚Šå‡ºã—ã€å–ã‚Šå‡ºã—ãŸå€¤ã‚’`x`ã¨å®šç¾©ã™ã‚‹ã€‚ã‚‚ã—ã€`x mod 2= 0`ãŒ`true`ãªã‚‰ã°ã€`x * x`ã‚’æ–°ãŸã«ä½œã‚‹`set`ã«å–ã‚Šå…¥ã‚Œã‚‹ã€‚ã—ãŸãŒã£ã¦ã€`set_2 = {4, 16}`ã¨ãªã‚‹ã€‚

ã¨ã„ã†æ„Ÿã˜ã§ã™ã€‚

# æ¬¡ã¯åˆæˆå‹ã®é€£æƒ³é…åˆ—(Map)
è¿‘ã„ã†ã¡ã«æ›¸ãã¾ã™ã€‚

<!-- è¨˜äº‹çµ‚ã‚ã‚Šç·š -->
---

<!-- ã“ã“ã«è„šæ³¨ãŒæ¥ã‚‹ -->
